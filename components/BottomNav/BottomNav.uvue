<template>
	<!-- 底部导航栏 -->
	<view class="bottom-nav">
		<view class="nav-item" :class="{active: props.current === 'home'}"
			@tap="switchToTarget('/pages/dynamic/index')">
			<view class="nav-icon">
				<text class="iconfont icon-home"></text>
			</view>
			<text class="nav-label">首页</text>
		</view>

		<view class="nav-item" :class="{active: props.current === 'study'}"
			@tap="switchToTarget('/pages/dynamic/study-center')">
			<view class="nav-icon">
				<text class="iconfont icon-book"></text>
			</view>
			<text class="nav-label">学习</text>
		</view>

		<view class="nav-item" :class="{active: props.current === 'statistics'}"
			@tap="switchToTarget('/pages/dynamic/stats-page')">
			<view class="nav-icon">
				<text class="iconfont icon-chart-line"></text>
			</view>
			<text class="nav-label">统计</text>
		</view>

		<view class="nav-item" :class="{active: props.current === 'mine'}"
			@tap="switchToTarget('/pages/dynamic/profile-page')">
			<view class="nav-icon">
				<text class="iconfont icon-user"></text>
			</view>
			<text class="nav-label">我的</text>
		</view>
	</view>
</template>

<script setup lang="uts">
	const props = defineProps({
		current: {
			type: String,
			require: true
		}
	})

	const switchToTarget = (path : string) => {
		// 使用 uni.navigateTo 替代 uni.switchTab，因为这些页面不是 tabBar 页面
		uni.navigateTo({
			url: path
		})
	}
</script>

<style scoped>
	/* 底部导航 */
	.bottom-nav {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: white;
		flex-direction: row;
		justify-content: space-around;
		padding: 24rpx 32rpx;
		border-top: 2rpx solid #e9ecef;
		z-index: 999;
	}

	.nav-item {
		align-items: center;
		color: #6c757d;
		font-size: 24rpx;
	}

	.nav-item.active {
		color: #333;
	}

	.nav-icon {
		width: 40rpx;
		height: 40rpx;
		margin-bottom: 8rpx;
	}

	.nav-label {
		font-size: 24rpx;
	}
</style>