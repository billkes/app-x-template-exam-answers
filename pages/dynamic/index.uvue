<template>
	<scroll-view class="container">
		<!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
		<view class="user-header">
			<view class="user-info">
				<text class="user-greeting">ä¸‹åˆå¥½ï¼Œææ˜</text>
				<text class="user-subtitle">ç»§ç»­ä½ çš„å­¦ä¹ ä¹‹æ—…</text>
			</view>
			<view class="avatar">
				<text class="avatar-text">L</text>
			</view>
		</view>

		<!-- å­¦ä¹ è¿›åº¦å¡ç‰‡ -->
		<view class="progress-card">
			<view class="progress-header">
				<text class="progress-title">æœ¬å‘¨å­¦ä¹ è¿›åº¦</text>
				<text class="progress-stats">65% å·²å®Œæˆ</text>
			</view>
			<view class="progress-bar">
				<view class="progress-fill"></view>
			</view>
			<text class="progress-desc">å·²å®Œæˆ 13/20 å°æ—¶ç›®æ ‡</text>
		</view>

		<!-- æ ¸å¿ƒåŠŸèƒ½æŒ‰é’® -->
		<view class="actions-grid">
			<view class="action-card" @tap="navigateTo('practice')">
				<view class="action-icon practice-icon"></view>
				<text class="action-title">å¼€å§‹ç»ƒä¹ </text>
				<text class="action-desc">éšæœºé¢˜ç›®æµ‹è¯•</text>
			</view>

			<view class="action-card" @tap="navigateTo('exam')">
				<view class="action-icon exam-icon"></view>
				<text class="action-title">æ¨¡æ‹Ÿè€ƒè¯•</text>
				<text class="action-desc">å…¨çœŸæ¨¡æ‹Ÿæµ‹è¯•</text>
			</view>

			<view class="action-card" @tap="navigateTo('materials')">
				<view class="action-icon materials-icon"></view>
				<text class="action-title">å­¦ä¹ èµ„æ–™</text>
				<text class="action-desc">çŸ¥è¯†ç‚¹ä¸è®²ä¹‰</text>
			</view>

			<view class="action-card" @tap="navigateTo('analysis')">
				<view class="action-icon analysis-icon"></view>
				<text class="action-title">æˆç»©åˆ†æ</text>
				<text class="action-desc">å­¦ä¹ æŠ¥å‘Šä¸ç»Ÿè®¡</text>
			</view>
		</view>

		<!-- å¼€å§‹å­¦ä¹  CTA æŒ‰é’® -->
		<button class="cta-button" @tap="startLearning">å¼€å§‹ä»Šæ—¥å­¦ä¹ </button>

		<!-- è¿‘æœŸè€ƒè¯•åˆ—è¡¨ -->
		<view class="section">
			<text class="section-title">è¿‘æœŸè€ƒè¯•</text>
			<view class="exam-list">
				<view class="exam-card" v-for="(exam, index) in recentExams" :key="index">
					<view class="exam-info">
						<text class="exam-name">{{ exam.name }}</text>
						<text class="exam-details">{{ exam.location }} | {{ exam.time }}</text>
					</view>
					<view class="exam-date-info">
						<text class="exam-date">{{ exam.date }}</text>
						<text class="exam-days-left">è¿˜å‰©{{ exam.daysLeft }}å¤©</text>
					</view>
				</view>
			</view>
		</view>

		<!-- å­¦ç§‘å¯¼èˆª -->
		<view class="section">
			<text class="section-title">å­¦ç§‘å¯¼èˆª</text>
			<view class="subject-scroll">
				<view class="subject-item" v-for="(subject, index) in subjects" :key="index"
					@tap="navigateToSubject(subject.name)">
					<view class="subject-icon" :class="subject.iconClass"></view>
					<text class="subject-name">{{ subject.name }}</text>
				</view>
			</view>
		</view>

		<!-- å­¦ä¹ æ•°æ®ç»Ÿè®¡ -->
		<view class="section">
			<text class="section-title">å­¦ä¹ æ•°æ®</text>
			<view class="stats-card">
				<view class="stats-grid">
					<view class="stat-item">
						<text class="stat-value">{{ learningStats.completedExercises }}</text>
						<text class="stat-label">å·²å®Œæˆç»ƒä¹ </text>
					</view>

					<view class="stat-item">
						<text class="stat-value">{{ learningStats.accuracyRate }}</text>
						<text class="stat-label">æ­£ç¡®ç‡</text>
					</view>

					<view class="stat-item">
						<text class="stat-value">{{ learningStats.studyHours }}</text>
						<text class="stat-label">å­¦ä¹ å°æ—¶æ•°</text>
					</view>

					<view class="stat-item">
						<text class="stat-value">{{ learningStats.mockExams }}</text>
						<text class="stat-label">æ¨¡æ‹Ÿè€ƒè¯•</text>
					</view>
				</view>
			</view>
		</view>
	</scroll-view>

	<!-- åº•éƒ¨å¯¼èˆªæ  -->
	<view class="bottom-nav">
		<view class="nav-item active" @tap="navigateTo('home')">
			<view class="nav-icon home-icon"></view>
			<text class="nav-label">é¦–é¡µ</text>
		</view>

		<view class="nav-item" @tap="navigateTo('learning')">
			<view class="nav-icon learning-icon"></view>
			<text class="nav-label">å­¦ä¹ </text>
		</view>

		<view class="nav-item" @tap="navigateTo('statistics')">
			<view class="nav-icon statistics-icon"></view>
			<text class="nav-label">ç»Ÿè®¡</text>
		</view>

		<view class="nav-item" @tap="navigateTo('profile')">
			<view class="nav-icon profile-icon"></view>
			<text class="nav-label">æˆ‘çš„</text>
		</view>
	</view>
</template>

<script setup lang="uts">
	import { ref } from 'vue'

	// è¿‘æœŸè€ƒè¯•æ•°æ®
	const recentExams = ref([
		{
			name: 'é«˜ç­‰æ•°å­¦ - æœŸä¸­è€ƒè¯•',
			location: 'ç¬¬10æ•™å®¤',
			time: 'ä¸Šåˆ9:00-11:00',
			date: '5æœˆ28æ—¥',
			daysLeft: 7
		},
		{
			name: 'å¤§å­¦è‹±è¯­ - æœŸæœ«è€ƒè¯•',
			location: 'ç¬¬3æ•™å®¤',
			time: 'ä¸‹åˆ2:00-4:00',
			date: '6æœˆ15æ—¥',
			daysLeft: 25
		},
		{
			name: 'è®¡ç®—æœºç§‘å­¦ - å®è·µè€ƒè¯•',
			location: 'è®¡ç®—æœºå®éªŒå®¤',
			time: 'ä¸Šåˆ10:00-12:00',
			date: '6æœˆ5æ—¥',
			daysLeft: 15
		}
	])

	// å­¦ç§‘å¯¼èˆªæ•°æ®
	const subjects = ref([
		{ name: 'æ•°å­¦', iconClass: 'math-icon' },
		{ name: 'è‹±è¯­', iconClass: 'english-icon' },
		{ name: 'è®¡ç®—æœº', iconClass: 'computer-icon' },
		{ name: 'ç‰©ç†', iconClass: 'physics-icon' },
		{ name: 'åŒ–å­¦', iconClass: 'chemistry-icon' }
	])

	// å­¦ä¹ ç»Ÿè®¡æ•°æ®
	const learningStats = ref({
		completedExercises: 36,
		accuracyRate: '87%',
		studyHours: 24,
		mockExams: 5
	})

	// å¯¼èˆªæ–¹æ³•
	function navigateTo(page : string) {
		console.log('Navigating to:', page)
		// è¿™é‡Œå¯ä»¥ä½¿ç”¨ uni.navigateTo æˆ–å…¶ä»–å¯¼èˆªæ–¹æ³•
	}

	function navigateToSubject(subject : string) {
		console.log('Navigating to subject:', subject)
		// è¿™é‡Œå¯ä»¥ä½¿ç”¨ uni.navigateTo æˆ–å…¶ä»–å¯¼èˆªæ–¹æ³•
	}

	function startLearning() {
		console.log('Starting today,s learning')
		// è¿™é‡Œå¯ä»¥æ·»åŠ å¼€å§‹å­¦ä¹ çš„é€»è¾‘
	}
</script>

<style>
	/* åŸºæœ¬æ ·å¼ */
	.container {
		display: flex;
		flex-direction: column;
		gap: 24rpx;
		padding: 20rpx;
		padding-bottom: 120rpx;
	}

	/* ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ */
	.user-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 16rpx 0;
	}

	.user-info {
		display: flex;
		flex-direction: column;
	}

	.user-greeting {
		font-size: 24rpx;
		font-weight: 600;
		margin-bottom: 4rpx;
	}

	.user-subtitle {
		color: #6c757d;
		font-size: 14rpx;
	}

		.avatar {
		width: 50rpx;
		height: 50rpx;
		border-radius: 25rpx;
		background-color: #3a397a;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.avatar-text {
		color: white;
		font-weight: bold;
		font-size: 20rpx;
	}

	/* è¿›åº¦å¡ç‰‡ */
	.progress-card {
		background: white;
		border-radius: 20rpx;
		padding: 20rpx;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
	}

	.progress-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 16rpx;
	}

	.progress-title {
		font-size: 18rpx;
		font-weight: 600;
	}

	.progress-stats {
		font-size: 14rpx;
		color: #6c757d;
	}

	.progress-bar {
		height: 8rpx;
		background: #e9ecef;
		border-radius: 4rpx;
		overflow: hidden;
		margin-bottom: 8rpx;
	}

	.progress-fill {
		height: 100%;
		width: 65%;
		background-color: #3a397a;
		border-radius: 4rpx;
	}

	.progress-desc {
		font-size: 14rpx;
		color: #6c757d;
	}

	/* æ ¸å¿ƒåŠŸèƒ½æŒ‰é’® */
	.actions-grid {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.action-card {
		width: 48%;
		background: white;
		border-radius: 16rpx;
		padding: 20rpx;
		text-align: center;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
		margin-bottom: 16rpx;
	}

	.action-icon {
		width: 50rpx;
		height: 50rpx;
		background: #f0f3ff;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 auto 12rpx;
		color: #3a397a;
		font-size: 20rpx;
	}

	.practice-icon {
		content: 'â–¶';
	}

	.exam-icon {
		content: 'ğŸ“‹';
	}

	.materials-icon {
		content: 'ğŸ“š';
	}

	.analysis-icon {
		content: 'ğŸ“Š';
	}

	.action-title {
		font-size: 16rpx;
		margin-bottom: 8rpx;
	}

	.action-desc {
		font-size: 13rpx;
		color: #6c757d;
	}

	/* CTAæŒ‰é’® */
	.cta-button {
		display: block;
		width: 100%;
		padding: 18rpx;
		background: #3a397a;
		color: white;
		border: none;
		border-radius: 16rpx;
		font-size: 18rpx;
		font-weight: 600;
		text-align: center;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.3);
	}

	/* åŒºå—æ ‡é¢˜ */
	.section {
		margin-bottom: 24rpx;
	}

	.section-title {
		font-size: 20rpx;
		font-weight: 600;
		margin-bottom: 16rpx;
		padding-left: 8rpx;
		border-left: 4rpx solid #3a397a;
	}

	/* è€ƒè¯•åˆ—è¡¨ */
	.exam-list {
		display: flex;
		flex-direction: column;
		gap: 12rpx;
	}

	.exam-card {
		background: white;
		border-radius: 16rpx;
		padding: 16rpx;
		display: flex;
		justify-content: space-between;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
	}

	.exam-info {
		display: flex;
		flex-direction: column;
	}

	.exam-name {
		font-size: 16rpx;
		margin-bottom: 4rpx;
	}

	.exam-details {
		font-size: 13rpx;
		color: #6c757d;
	}

	.exam-date-info {
		display: flex;
		flex-direction: column;
		align-items: flex-end;
	}

	.exam-date {
		font-weight: 600;
		color: #3a397a;
	}

	.exam-days-left {
		font-size: 12rpx;
		color: #ff7e5f;
		font-weight: 500;
	}

	/* å­¦ç§‘å¯¼èˆª */
	.subject-scroll {
		display: flex;
		flex-direction: row;
		gap: 12rpx;
		padding: 4rpx 0 16rpx;
	}

	.subject-item {
		flex: 0 0 auto;
		width: 80rpx;
		text-align: center;
	}

	.subject-icon {
		width: 60rpx;
		height: 60rpx;
		border-radius: 16rpx;
		background: white;
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 auto 8rpx;
		box-shadow: 0 4rpx 12rpx rgba(58, 57, 122, 0.1);
		color: #3a397a;
		font-size: 24rpx;
	}

	.math-icon {
		content: 'âˆ‘';
	}

	.english-icon {
		content: 'ğŸ”¤';
	}

	.computer-icon {
		content: 'ğŸ’»';
	}

	.physics-icon {
		content: 'âš›';
	}

	.chemistry-icon {
		content: 'ğŸ§ª';
	}

	.subject-name {
		font-size: 13rpx;
		font-weight: 500;
	}

	/* å­¦ä¹ æ•°æ®å¡ç‰‡ */
	.stats-card {
		background: white;
		border-radius: 20rpx;
		padding: 20rpx;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
	}

	.stats-grid {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.stat-item {
		width: 48%;
		text-align: center;
		margin-bottom: 20rpx;
	}

	.stat-value {
		font-size: 24rpx;
		font-weight: 700;
		color: #3a397a;
		margin-bottom: 4rpx;
	}

	.stat-label {
		font-size: 14rpx;
		color: #6c757d;
	}

	/* åº•éƒ¨å¯¼èˆª */
	.bottom-nav {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: white;
		display: flex;
		flex-direction: row;
		justify-content: space-around;
		padding: 16rpx;
		border-top: 1rpx solid #e9ecef;
		z-index: 999;
	}

	.nav-item {
		display: flex;
		flex-direction: column;
		align-items: center;
		color: #6c757d;
		font-size: 12rpx;
	}

	.nav-item.active {
		color: #3a397a;
	}

	.nav-icon {
		width: 20rpx;
		height: 20rpx;
		margin-bottom: 4rpx;
	}

	.home-icon {
		content: 'ğŸ ';
	}

	.learning-icon {
		content: 'ğŸ“–';
	}

	.statistics-icon {
		content: 'ğŸ“ˆ';
	}

	.profile-icon {
		content: 'ğŸ‘¤';
	}

	.nav-label {
		font-size: 12rpx;
	}
</style>