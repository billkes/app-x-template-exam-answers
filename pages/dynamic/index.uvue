<template>
	<view class="container">
		<scroll-view class="container-scroll">
			<view class="container-scroll-view">

				<!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
				<view class="user-header">
					<view>
						<text class="user-greeting">ä¸‹åˆå¥½ï¼Œææ˜</text>
						<text class="user-subtitle">ç»§ç»­ä½ çš„å­¦ä¹ ä¹‹æ—…</text>
					</view>
					<view class="avatar">
						<text class="avatar-text">L</text>
					</view>
				</view>

				<!-- å­¦ä¹ è¿›åº¦å¡ç‰‡ -->
				<view class="progress-card">
					<view class="progress-header">
						<text class="progress-title">æœ¬å‘¨å­¦ä¹ è¿›åº¦</text>
						<text class="progress-stats">65% å·²å®Œæˆ</text>
					</view>
					<view class="progress-bar">
						<view class="progress-fill"></view>
					</view>
					<text class="progress-desc">å·²å®Œæˆ 13/20 å°æ—¶ç›®æ ‡</text>
				</view>

				<!-- æ ¸å¿ƒåŠŸèƒ½æŒ‰é’® -->
				<view class="actions-grid">
					<view class="grid-col grid-col-1">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('practice')">
							<view class="action-icon">
								<text class="action-icon-text action-icon-play">ğŸš©</text>
							</view>
							<text class="action-title">å¼€å§‹ç»ƒä¹ </text>
							<text class="action-desc">éšæœºé¢˜ç›®æµ‹è¯•</text>
						</view>
					</view>
					<view class="grid-col grid-col-2">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('exam')">
							<view class="action-icon">
								<text class="action-icon-text">ğŸ“‹</text>
							</view>
							<view></view>
							<text class="action-title">æ¨¡æ‹Ÿè€ƒè¯•</text>
							<text class="action-desc">å…¨çœŸæ¨¡æ‹Ÿæµ‹è¯•</text>
						</view>
					</view>
					<view class="grid-col grid-col-3">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('materials')">
							<view class="action-icon">
								<text class="action-icon-text">ğŸ“š</text>
							</view>
							<text class="action-title">å­¦ä¹ èµ„æ–™</text>
							<text class="action-desc">çŸ¥è¯†ç‚¹ä¸è®²ä¹‰</text>
						</view>
					</view>
					<view class="grid-col grid-col-4">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('analysis')">
							<view class="action-icon">
								<text class="action-icon-text">ğŸ“Š</text>
							</view>
							<text class="action-title">æˆç»©åˆ†æ</text>
							<text class="action-desc">å­¦ä¹ æŠ¥å‘Šä¸ç»Ÿè®¡</text>
						</view>
					</view>
				</view>

				<!-- è¿‘æœŸè€ƒè¯•åˆ—è¡¨ -->
				<view class="section">
					<view class="section-title">
						<text class="section-title-text">è¿‘æœŸè€ƒè¯•</text>
					</view>
					<view class="exam-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
						v-for="(exam, index) in recentExams" :key="index">
						<view>
							<text class="exam-name">{{ exam.name }}</text>
							<text class="exam-details">{{ exam.location }} | {{ exam.time }}</text>
						</view>
						<view class="exam-date-info">
							<text class="exam-date">{{ exam.date }}</text>
							<text class="exam-days-left">è¿˜å‰©{{ exam.daysLeft }}å¤©</text>
						</view>
					</view>
				</view>

				<!-- å­¦ç§‘å¯¼èˆª -->
				<view class="section">
					<view class="section-title">
						<text class="section-title-text">å­¦ç§‘å¯¼èˆª</text>
					</view>
					<view class="subject-view">
						<view class="subject-item" v-for="(subject, index) in subjects" :key="index"
							@tap="navigateToSubject(subject.name)">
							<view class="subject-icon" hover-class="click-hover" hover-start-time="0"
								hover-stay-time="100">
								<text :style="`font-size: ${subject.size}rpx;`">{{subject.icon}}</text>
							</view>
							<text class="subject-name">{{ subject.name }}</text>
						</view>
					</view>
				</view>

				<!-- å­¦ä¹ æ•°æ®ç»Ÿè®¡ -->
				<view class="section">
					<view class="section-title">
						<text class="section-title-text">å­¦ä¹ æ•°æ®</text>
					</view>
					<view class="stats-card">
						<view class="stats-grid">
							<view class="stat-item stat-item-1">
								<text class="stat-value">{{ learningStats.completedExercises }}</text>
								<text class="stat-label">å·²å®Œæˆç»ƒä¹ </text>
							</view>

							<view class="stat-item stat-item-2">
								<text class="stat-value">{{ learningStats.accuracyRate }}</text>
								<text class="stat-label">æ­£ç¡®ç‡</text>
							</view>

							<view class="stat-item stat-item-3">
								<text class="stat-value">{{ learningStats.studyHours }}</text>
								<text class="stat-label">å­¦ä¹ å°æ—¶æ•°</text>
							</view>

							<view class="stat-item stat-item-4">
								<text class="stat-value">{{ learningStats.mockExams }}</text>
								<text class="stat-label">æ¨¡æ‹Ÿè€ƒè¯•</text>
							</view>
						</view>
					</view>
				</view>
			</view>
		</scroll-view>
		<BottomNav current="home" />
	</view>
</template>

<script setup lang="uts">
	import { ref } from 'vue'

	// è¿‘æœŸè€ƒè¯•æ•°æ®
	const recentExams = ref([
		{
			name: 'é«˜ç­‰æ•°å­¦ - æœŸä¸­è€ƒè¯•',
			location: 'ç¬¬10æ•™å®¤',
			time: 'ä¸Šåˆ9:00-11:00',
			date: '5æœˆ28æ—¥',
			daysLeft: 7
		},
		{
			name: 'å¤§å­¦è‹±è¯­ - æœŸæœ«è€ƒè¯•',
			location: 'ç¬¬3æ•™å®¤',
			time: 'ä¸‹åˆ2:00-4:00',
			date: '6æœˆ15æ—¥',
			daysLeft: 25
		},
		{
			name: 'è®¡ç®—æœºç§‘å­¦ - å®è·µè€ƒè¯•',
			location: 'è®¡ç®—æœºå®éªŒå®¤',
			time: 'ä¸Šåˆ10:00-12:00',
			date: '6æœˆ5æ—¥',
			daysLeft: 15
		}
	])

	// å­¦ç§‘å¯¼èˆªæ•°æ®
	const subjects = ref([
		{ name: 'æ•°å­¦', icon: 'âˆ‘', size: 40 },
		{ name: 'è‹±è¯­', icon: 'ğŸ”¤', size: 40 },
		{ name: 'è®¡ç®—æœº', icon: 'ğŸ’»', size: 40 },
		{ name: 'ç‰©ç†', icon: 'âš›', size: 60 },
		{ name: 'åŒ–å­¦', icon: 'ğŸ§ª', size: 40 }
	])

	// å­¦ä¹ ç»Ÿè®¡æ•°æ®
	const learningStats = ref({
		completedExercises: 36,
		accuracyRate: '87%',
		studyHours: 24,
		mockExams: 5
	})

	// å¯¼èˆªæ–¹æ³•
	function navigateTo(page : string) {
		console.log('Navigating to:', page)
		// è¿™é‡Œå¯ä»¥ä½¿ç”¨ uni.navigateTo æˆ–å…¶ä»–å¯¼èˆªæ–¹æ³•
	}

	function navigateToSubject(subject : string) {
		console.log('Navigating to subject:', subject)
		// è¿™é‡Œå¯ä»¥ä½¿ç”¨ uni.navigateTo æˆ–å…¶ä»–å¯¼èˆªæ–¹æ³•
	}

	function startLearning() {
		console.log('Starting today,s learning')
		// è¿™é‡Œå¯ä»¥æ·»åŠ å¼€å§‹å­¦ä¹ çš„é€»è¾‘
	}
</script>

<style scoped>
	/* åŸºæœ¬æ ·å¼ */
	.container {
		flex: 1;
		background: linear-gradient(to bottom right, #f8f9fc, #eef0f8);
	}

	.container-scroll {
		flex: 1;
	}

	.container-scroll-view {
		padding: 40rpx;
		padding-bottom: 120rpx;
	}

	/* ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ */
	.user-header {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		padding: 20rpx 0;
		margin-bottom: 24rpx;
	}

	.user-greeting {
		font-size: 48rpx;
		font-weight: bold;
		margin-bottom: 8rpx;
		color: #333;
		height: 76rpx;
		line-height: 76rpx;
	}

	.user-subtitle {
		color: #6c757d;
		font-size: 28rpx;
		height: 44rpx;
		line-height: 44rpx;
	}

	.avatar {
		width: 100rpx;
		height: 100rpx;
		border-radius: 50rpx;
		background-color: #333;
		background: linear-gradient(to bottom right, #3a397a, #6a69b3);
		align-items: center;
		justify-content: center;
	}

	.avatar-text {
		color: white;
		font-weight: bold;
		font-size: 40rpx;
	}

	/* è¿›åº¦å¡ç‰‡ */
	.progress-card {
		border-radius: 40rpx;
		padding: 40rpx;
		margin-bottom: 24rpx;
		background-image: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
	}

	.progress-header {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 32rpx;
	}

	.progress-title {
		font-size: 36rpx;
		height: 56rpx;
		line-height: 56rpx;
		font-weight: bold;
		color: #2c2c2c;
	}

	.progress-stats {
		font-size: 28rpx;
		height: 56rpx;
		line-height: 56rpx;
		color: #6c757d;
	}

	.progress-bar {
		height: 16rpx;
		background: #e9ecef;
		border-radius: 8rpx;
		overflow: hidden;
		margin-bottom: 16rpx;
	}

	.progress-fill {
		height: 100%;
		width: 65%;
		background: linear-gradient(to right, #3a397a, #6a69b3);
		border-radius: 8rpx;
	}

	.progress-desc {
		font-size: 28rpx;
		color: #2c2c2c;
		height: 50rpx;
		line-height: 50rpx;
	}

	/* æ ¸å¿ƒåŠŸèƒ½æŒ‰é’® */
	.actions-grid {
		margin-bottom: 48rpx;
		flex-direction: row;
		flex-wrap: wrap;
	}

	.grid-col {
		width: 50%;
	}

	.grid-col-1,
	.grid-col-2 {
		padding-bottom: 24rpx;
	}

	.grid-col-1,
	.grid-col-3 {
		padding-right: 12rpx;
	}

	.grid-col-2,
	.grid-col-4 {
		padding-left: 12rpx;
	}

	.action-card {
		flex: 1;
		background: white;
		border-radius: 32rpx;
		padding: 30rpx;
		text-align: center;
		background-image: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
	}

	.click-hover {
		transform: scale(0.97);
	}

	.action-icon {
		width: 100rpx;
		height: 100rpx;
		background: linear-gradient(to bottom left, #f0f3ff, #e6e9ff);
		border-radius: 50rpx;
		align-items: center;
		justify-content: center;
		margin: 0 auto 16rpx;
	}

	.action-icon-text {
		color: #333;
		font-size: 40rpx;
	}

	.action-icon-play {
		position: relative;
		left: 5rpx;
	}

	.action-title {
		font-size: 32rpx;
		margin-bottom: 8rpx;
		color: #2c2c2c;
		text-align: center;
		font-weight: bold;
	}

	.action-desc {
		font-size: 26rpx;
		color: #6c757d;
		text-align: center;
	}

	/* åŒºå—æ ‡é¢˜ */
	.section {
		margin-bottom: 48rpx;
	}

	.section-title {
		margin-bottom: 32rpx;
		padding-left: 16rpx;
		border-left: 8rpx solid #3a397a;
	}

	.section-title-text {
		font-size: 40rpx;
		font-weight: bold;
		color: #2c2c2c;
	}

	/* è€ƒè¯•åˆ—è¡¨ */
	.exam-card {
		background: #fff;
		border-radius: 32rpx;
		padding: 32rpx;
		flex-direction: row;
		justify-content: space-between;
		margin-bottom: 20rpx;
		border: 2rpx solid #e6e9f0;
		background: linear-gradient(to bottom, #ffffff, #f8f9fc);
	}

	.exam-name {
		font-size: 32rpx;
		margin-bottom: 8rpx;
		height: 50rpx;
		line-height: 50rpx;
		color: #2c2c2c;
	}

	.exam-details {
		font-size: 26rpx;
		color: #6c757d;
		height: 40rpx;
		line-height: 40rpx;
	}

	.exam-date-info {
		align-items: flex-end;
	}

	.exam-date {
		font-weight: bold;
		color: #3a397a;
		height: 50rpx;
		line-height: 50rpx;
		margin-bottom: 8rpx;
	}

	.exam-days-left {
		font-size: 24rpx;
		color: #ff7e5f;
		font-weight: bold;
		height: 40rpx;
		line-height: 40rpx;
	}

	/* å­¦ç§‘å¯¼èˆª */
	.subject-view {
		flex-direction: row;
		flex-wrap: wrap;
		padding: 8rpx 0 32rpx;
	}

	.subject-item {
		width: 25%;
		padding: 0 0 20rpx 0;
	}

	.subject-icon {
		width: 120rpx;
		height: 120rpx;
		border-radius: 32rpx;
		background: white;
		align-items: center;
		justify-content: center;
		margin: 0 auto 8rpx;
		color: #3a397a;
		background: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
		font-size: 24rpx;
	}

	.subject-name {
		font-size: 26rpx;
		font-weight: bold;
		text-align: center;
		line-height: 50rpx;
		height: 50rpx;
	}

	/* å­¦ä¹ æ•°æ®å¡ç‰‡ */
	.stats-card {
		background: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
		border-radius: 20rpx;
		padding: 40rpx 20rpx;
	}

	.stats-grid {
		flex-direction: row;
		flex-wrap: wrap;
	}

	.stat-item {
		width: 50%;
	}

	.stat-item-1,
	.stat-item-2 {
		padding-bottom: 18rpx;
	}

	.stat-item-3,
	.stat-item-4 {
		padding-top: 18rpx;
	}

	.stat-item-1,
	.stat-item-3 {
		padding-right: 12rpx;
	}

	.stat-item-2,
	.stat-item-4 {
		padding-left: 12rpx;
	}

	.stat-value {
		font-size: 48rpx;
		text-align: center;
		font-weight: bold;
		color: #3a397a;
		margin-bottom: 8rpx;
	}

	.stat-label {
		font-size: 28rpx;
		text-align: center;
		color: #6c757d;
	}
</style>