<template>
	<scroll-view class="container">
		<!-- 用户信息区域 -->
		<view class="user-header">
			<view class="user-info">
				<text class="user-greeting">下午好，李明</text>
				<text class="user-subtitle">继续你的学习之旅</text>
			</view>
			<view class="avatar">
				<text class="avatar-text">L</text>
			</view>
		</view>

		<!-- 学习进度卡片 -->
		<view class="progress-card">
			<view class="progress-header">
				<text class="progress-title">本周学习进度</text>
				<text class="progress-stats">65% 已完成</text>
			</view>
			<view class="progress-bar">
				<view class="progress-fill"></view>
			</view>
			<text class="progress-desc">已完成 13/20 小时目标</text>
		</view>

		<!-- 核心功能按钮 -->
		<view class="actions-grid">
			<view class="action-card" @tap="navigateTo('practice')">
				<view class="action-icon practice-icon"></view>
				<text class="action-title">开始练习</text>
				<text class="action-desc">随机题目测试</text>
			</view>

			<view class="action-card" @tap="navigateTo('exam')">
				<view class="action-icon exam-icon"></view>
				<text class="action-title">模拟考试</text>
				<text class="action-desc">全真模拟测试</text>
			</view>

			<view class="action-card" @tap="navigateTo('materials')">
				<view class="action-icon materials-icon"></view>
				<text class="action-title">学习资料</text>
				<text class="action-desc">知识点与讲义</text>
			</view>

			<view class="action-card" @tap="navigateTo('analysis')">
				<view class="action-icon analysis-icon"></view>
				<text class="action-title">成绩分析</text>
				<text class="action-desc">学习报告与统计</text>
			</view>
		</view>

		<!-- 开始学习 CTA 按钮 -->
		<button class="cta-button" @tap="startLearning">开始今日学习</button>

		<!-- 近期考试列表 -->
		<view class="section">
			<text class="section-title">近期考试</text>
			<view class="exam-list">
				<view class="exam-card" v-for="(exam, index) in recentExams" :key="index">
					<view class="exam-info">
						<text class="exam-name">{{ exam.name }}</text>
						<text class="exam-details">{{ exam.location }} | {{ exam.time }}</text>
					</view>
					<view class="exam-date-info">
						<text class="exam-date">{{ exam.date }}</text>
						<text class="exam-days-left">还剩{{ exam.daysLeft }}天</text>
					</view>
				</view>
			</view>
		</view>

		<!-- 学科导航 -->
		<view class="section">
			<text class="section-title">学科导航</text>
			<view class="subject-scroll">
				<view class="subject-item" v-for="(subject, index) in subjects" :key="index"
					@tap="navigateToSubject(subject.name)">
					<view class="subject-icon" :class="subject.iconClass"></view>
					<text class="subject-name">{{ subject.name }}</text>
				</view>
			</view>
		</view>

		<!-- 学习数据统计 -->
		<view class="section">
			<text class="section-title">学习数据</text>
			<view class="stats-card">
				<view class="stats-grid">
					<view class="stat-item">
						<text class="stat-value">{{ learningStats.completedExercises }}</text>
						<text class="stat-label">已完成练习</text>
					</view>

					<view class="stat-item">
						<text class="stat-value">{{ learningStats.accuracyRate }}</text>
						<text class="stat-label">正确率</text>
					</view>

					<view class="stat-item">
						<text class="stat-value">{{ learningStats.studyHours }}</text>
						<text class="stat-label">学习小时数</text>
					</view>

					<view class="stat-item">
						<text class="stat-value">{{ learningStats.mockExams }}</text>
						<text class="stat-label">模拟考试</text>
					</view>
				</view>
			</view>
		</view>
	</scroll-view>

	<!-- 底部导航栏 -->
	<view class="bottom-nav">
		<view class="nav-item active" @tap="navigateTo('home')">
			<view class="nav-icon home-icon"></view>
			<text class="nav-label">首页</text>
		</view>

		<view class="nav-item" @tap="navigateTo('learning')">
			<view class="nav-icon learning-icon"></view>
			<text class="nav-label">学习</text>
		</view>

		<view class="nav-item" @tap="navigateTo('statistics')">
			<view class="nav-icon statistics-icon"></view>
			<text class="nav-label">统计</text>
		</view>

		<view class="nav-item" @tap="navigateTo('profile')">
			<view class="nav-icon profile-icon"></view>
			<text class="nav-label">我的</text>
		</view>
	</view>
</template>

<script setup lang="uts">
	import { ref } from 'vue'

	// 近期考试数据
	const recentExams = ref([
		{
			name: '高等数学 - 期中考试',
			location: '第10教室',
			time: '上午9:00-11:00',
			date: '5月28日',
			daysLeft: 7
		},
		{
			name: '大学英语 - 期末考试',
			location: '第3教室',
			time: '下午2:00-4:00',
			date: '6月15日',
			daysLeft: 25
		},
		{
			name: '计算机科学 - 实践考试',
			location: '计算机实验室',
			time: '上午10:00-12:00',
			date: '6月5日',
			daysLeft: 15
		}
	])

	// 学科导航数据
	const subjects = ref([
		{ name: '数学', iconClass: 'math-icon' },
		{ name: '英语', iconClass: 'english-icon' },
		{ name: '计算机', iconClass: 'computer-icon' },
		{ name: '物理', iconClass: 'physics-icon' },
		{ name: '化学', iconClass: 'chemistry-icon' }
	])

	// 学习统计数据
	const learningStats = ref({
		completedExercises: 36,
		accuracyRate: '87%',
		studyHours: 24,
		mockExams: 5
	})

	// 导航方法
	function navigateTo(page : string) {
		console.log('Navigating to:', page)
		// 这里可以使用 uni.navigateTo 或其他导航方法
	}

	function navigateToSubject(subject : string) {
		console.log('Navigating to subject:', subject)
		// 这里可以使用 uni.navigateTo 或其他导航方法
	}

	function startLearning() {
		console.log('Starting today,s learning')
		// 这里可以添加开始学习的逻辑
	}
</script>

<style>
	/* 基本样式 */
	.container {
		display: flex;
		flex-direction: column;
		gap: 24rpx;
		padding: 20rpx;
		padding-bottom: 120rpx;
	}

	/* 用户信息区域 */
	.user-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 16rpx 0;
	}

	.user-info {
		display: flex;
		flex-direction: column;
	}

	.user-greeting {
		font-size: 24rpx;
		font-weight: 600;
		margin-bottom: 4rpx;
	}

	.user-subtitle {
		color: #6c757d;
		font-size: 14rpx;
	}

		.avatar {
		width: 50rpx;
		height: 50rpx;
		border-radius: 25rpx;
		background-color: #3a397a;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.avatar-text {
		color: white;
		font-weight: bold;
		font-size: 20rpx;
	}

	/* 进度卡片 */
	.progress-card {
		background: white;
		border-radius: 20rpx;
		padding: 20rpx;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
	}

	.progress-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 16rpx;
	}

	.progress-title {
		font-size: 18rpx;
		font-weight: 600;
	}

	.progress-stats {
		font-size: 14rpx;
		color: #6c757d;
	}

	.progress-bar {
		height: 8rpx;
		background: #e9ecef;
		border-radius: 4rpx;
		overflow: hidden;
		margin-bottom: 8rpx;
	}

	.progress-fill {
		height: 100%;
		width: 65%;
		background-color: #3a397a;
		border-radius: 4rpx;
	}

	.progress-desc {
		font-size: 14rpx;
		color: #6c757d;
	}

	/* 核心功能按钮 */
	.actions-grid {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.action-card {
		width: 48%;
		background: white;
		border-radius: 16rpx;
		padding: 20rpx;
		text-align: center;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
		margin-bottom: 16rpx;
	}

	.action-icon {
		width: 50rpx;
		height: 50rpx;
		background: #f0f3ff;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 auto 12rpx;
		color: #3a397a;
		font-size: 20rpx;
	}

	.practice-icon {
		content: '▶';
	}

	.exam-icon {
		content: '📋';
	}

	.materials-icon {
		content: '📚';
	}

	.analysis-icon {
		content: '📊';
	}

	.action-title {
		font-size: 16rpx;
		margin-bottom: 8rpx;
	}

	.action-desc {
		font-size: 13rpx;
		color: #6c757d;
	}

	/* CTA按钮 */
	.cta-button {
		display: block;
		width: 100%;
		padding: 18rpx;
		background: #3a397a;
		color: white;
		border: none;
		border-radius: 16rpx;
		font-size: 18rpx;
		font-weight: 600;
		text-align: center;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.3);
	}

	/* 区块标题 */
	.section {
		margin-bottom: 24rpx;
	}

	.section-title {
		font-size: 20rpx;
		font-weight: 600;
		margin-bottom: 16rpx;
		padding-left: 8rpx;
		border-left: 4rpx solid #3a397a;
	}

	/* 考试列表 */
	.exam-list {
		display: flex;
		flex-direction: column;
		gap: 12rpx;
	}

	.exam-card {
		background: white;
		border-radius: 16rpx;
		padding: 16rpx;
		display: flex;
		justify-content: space-between;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
	}

	.exam-info {
		display: flex;
		flex-direction: column;
	}

	.exam-name {
		font-size: 16rpx;
		margin-bottom: 4rpx;
	}

	.exam-details {
		font-size: 13rpx;
		color: #6c757d;
	}

	.exam-date-info {
		display: flex;
		flex-direction: column;
		align-items: flex-end;
	}

	.exam-date {
		font-weight: 600;
		color: #3a397a;
	}

	.exam-days-left {
		font-size: 12rpx;
		color: #ff7e5f;
		font-weight: 500;
	}

	/* 学科导航 */
	.subject-scroll {
		display: flex;
		flex-direction: row;
		gap: 12rpx;
		padding: 4rpx 0 16rpx;
	}

	.subject-item {
		flex: 0 0 auto;
		width: 80rpx;
		text-align: center;
	}

	.subject-icon {
		width: 60rpx;
		height: 60rpx;
		border-radius: 16rpx;
		background: white;
		display: flex;
		align-items: center;
		justify-content: center;
		margin: 0 auto 8rpx;
		box-shadow: 0 4rpx 12rpx rgba(58, 57, 122, 0.1);
		color: #3a397a;
		font-size: 24rpx;
	}

	.math-icon {
		content: '∑';
	}

	.english-icon {
		content: '🔤';
	}

	.computer-icon {
		content: '💻';
	}

	.physics-icon {
		content: '⚛';
	}

	.chemistry-icon {
		content: '🧪';
	}

	.subject-name {
		font-size: 13rpx;
		font-weight: 500;
	}

	/* 学习数据卡片 */
	.stats-card {
		background: white;
		border-radius: 20rpx;
		padding: 20rpx;
		box-shadow: 0 8rpx 20rpx rgba(58, 57, 122, 0.08);
	}

	.stats-grid {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-between;
	}

	.stat-item {
		width: 48%;
		text-align: center;
		margin-bottom: 20rpx;
	}

	.stat-value {
		font-size: 24rpx;
		font-weight: 700;
		color: #3a397a;
		margin-bottom: 4rpx;
	}

	.stat-label {
		font-size: 14rpx;
		color: #6c757d;
	}

	/* 底部导航 */
	.bottom-nav {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: white;
		display: flex;
		flex-direction: row;
		justify-content: space-around;
		padding: 16rpx;
		border-top: 1rpx solid #e9ecef;
		z-index: 999;
	}

	.nav-item {
		display: flex;
		flex-direction: column;
		align-items: center;
		color: #6c757d;
		font-size: 12rpx;
	}

	.nav-item.active {
		color: #3a397a;
	}

	.nav-icon {
		width: 20rpx;
		height: 20rpx;
		margin-bottom: 4rpx;
	}

	.home-icon {
		content: '🏠';
	}

	.learning-icon {
		content: '📖';
	}

	.statistics-icon {
		content: '📈';
	}

	.profile-icon {
		content: '👤';
	}

	.nav-label {
		font-size: 12rpx;
	}
</style>