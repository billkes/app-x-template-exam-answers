<template>
	<view class="container">
		<scroll-view class="container-scroll">
			<view class="container-scroll-view">

				<!-- 用户信息区域 -->
				<view class="user-header">
					<view>
						<text class="user-greeting">下午好，李明</text>
						<text class="user-subtitle">继续你的学习之旅</text>
					</view>
					<view class="avatar">
						<text class="avatar-text">L</text>
					</view>
				</view>

				<!-- 学习进度卡片 -->
				<view class="progress-card">
					<view class="progress-header">
						<text class="progress-title">本周学习进度</text>
						<text class="progress-stats">65% 已完成</text>
					</view>
					<view class="progress-bar">
						<view class="progress-fill"></view>
					</view>
					<text class="progress-desc">已完成 13/20 小时目标</text>
				</view>

				<!-- 核心功能按钮 -->
				<view class="actions-grid">
					<view class="grid-col grid-col-1">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('practice')">
							<view class="action-icon">
								<text class="action-icon-text action-icon-play iconfont icon-flag"></text>
							</view>
							<text class="action-title">开始练习</text>
							<text class="action-desc">随机题目测试</text>
						</view>
					</view>
					<view class="grid-col grid-col-2">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('exam')">
							<view class="action-icon">
								<text class="action-icon-text iconfont icon-file"></text>
							</view>
							<view></view>
							<text class="action-title">模拟考试</text>
							<text class="action-desc">全真模拟测试</text>
						</view>
					</view>
					<view class="grid-col grid-col-3">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('materials')">
							<view class="action-icon">
								<text class="iconfont icon-book"></text>
							</view>
							<text class="action-title">学习资料</text>
							<text class="action-desc">知识点与讲义</text>
						</view>
					</view>
					<view class="grid-col grid-col-4">
						<view class="action-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
							@tap="navigateTo('analysis')">
							<view class="action-icon">
								<text class="iconfont icon-barchart"></text>
							</view>
							<text class="action-title">成绩分析</text>
							<text class="action-desc">学习报告与统计</text>
						</view>
					</view>
				</view>

				<!-- 近期考试列表 -->
				<view class="section">
					<view class="section-title">
						<text class="section-title-text">近期考试</text>
					</view>
					<view class="exam-card" hover-class="click-hover" hover-start-time="0" hover-stay-time="100"
						v-for="(exam, index) in recentExams" :key="index">
						<view>
							<text class="exam-name">{{ exam.name }}</text>
							<text class="exam-details">{{ exam.location }} | {{ exam.time }}</text>
						</view>
						<view class="exam-date-info">
							<text class="exam-date">{{ exam.date }}</text>
							<text class="exam-days-left">还剩{{ exam.daysLeft }}天</text>
						</view>
					</view>
				</view>

				<!-- 学科导航 -->
				<view class="section">
					<view class="section-title">
						<text class="section-title-text">学科导航</text>
					</view>
					<view class="subject-view">
						<view class="subject-item" v-for="(subject, index) in subjects" :key="index"
							@tap="navigateToSubject(subject.name)">
							<view class="subject-icon" hover-class="click-hover" hover-start-time="0"
								hover-stay-time="100">
								<text :class="`iconfont ${subject.icon}`" :style="`font-size: ${subject.size}rpx;`"></text>
							</view>
							<text class="subject-name">{{ subject.name }}</text>
						</view>
					</view>
				</view>

				<!-- 学习数据统计 -->
				<view class="section">
					<view class="section-title">
						<text class="section-title-text">学习数据</text>
					</view>
					<view class="stats-card">
						<view class="stats-grid">
							<view class="stat-item stat-item-1">
								<text class="stat-value">{{ learningStats.completedExercises }}</text>
								<text class="stat-label">已完成练习</text>
							</view>

							<view class="stat-item stat-item-2">
								<text class="stat-value">{{ learningStats.accuracyRate }}</text>
								<text class="stat-label">正确率</text>
							</view>

							<view class="stat-item stat-item-3">
								<text class="stat-value">{{ learningStats.studyHours }}</text>
								<text class="stat-label">学习小时数</text>
							</view>

							<view class="stat-item stat-item-4">
								<text class="stat-value">{{ learningStats.mockExams }}</text>
								<text class="stat-label">模拟考试</text>
							</view>
						</view>
					</view>
				</view>
			</view>
		</scroll-view>
		<BottomNav current="home" />
	</view>
</template>

<script setup lang="uts">
	import { ref } from 'vue'

	// 近期考试数据
	const recentExams = ref([
		{
			name: '高等数学 - 期中考试',
			location: '第10教室',
			time: '上午9:00-11:00',
			date: '5月28日',
			daysLeft: 7
		},
		{
			name: '大学英语 - 期末考试',
			location: '第3教室',
			time: '下午2:00-4:00',
			date: '6月15日',
			daysLeft: 25
		},
		{
			name: '计算机科学 - 实践考试',
			location: '计算机实验室',
			time: '上午10:00-12:00',
			date: '6月5日',
			daysLeft: 15
		}
	])

	// 学科导航数据
	const subjects = ref([
		{ name: '数学', icon: 'icon-math', size: 40 },
		{ name: '英语', icon: 'icon-language', size: 40 },
		{ name: '计算机', icon: 'icon-computer', size: 40 },
		{ name: '物理', icon: 'icon-physics', size: 60 },
		{ name: '化学', icon: 'icon-chemistry', size: 40 }
	])

	// 学习统计数据
	const learningStats = ref({
		completedExercises: 36,
		accuracyRate: '87%',
		studyHours: 24,
		mockExams: 5
	})

	// 导航方法
	function navigateTo(page : string) {
		console.log('Navigating to:', page)
		// 这里可以使用 uni.navigateTo 或其他导航方法
	}

	function navigateToSubject(subject : string) {
		console.log('Navigating to subject:', subject)
		// 这里可以使用 uni.navigateTo 或其他导航方法
	}

	function startLearning() {
		console.log('Starting today,s learning')
		// 这里可以添加开始学习的逻辑
	}
</script>

<style scoped>
	/* 基本样式 */
	.container {
		flex: 1;
		background: linear-gradient(to bottom right, #f8f9fc, #eef0f8);
	}

	.container-scroll {
		flex: 1;
	}

	.container-scroll-view {
		padding: 40rpx;
		padding-bottom: 120rpx;
	}

	/* 用户信息区域 */
	.user-header {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		padding: 20rpx 0;
		margin-bottom: 24rpx;
	}

	.user-greeting {
		font-size: 48rpx;
		font-weight: bold;
		margin-bottom: 8rpx;
		color: #333;
		height: 76rpx;
		line-height: 76rpx;
	}

	.user-subtitle {
		color: #6c757d;
		font-size: 28rpx;
		height: 44rpx;
		line-height: 44rpx;
	}

	.avatar {
		width: 100rpx;
		height: 100rpx;
		border-radius: 50rpx;
		background-color: #333;
		background: linear-gradient(to bottom right, #3a397a, #6a69b3);
		align-items: center;
		justify-content: center;
	}

	.avatar-text {
		color: white;
		font-weight: bold;
		font-size: 40rpx;
	}

	/* 进度卡片 */
	.progress-card {
		border-radius: 40rpx;
		padding: 40rpx;
		margin-bottom: 24rpx;
		background-image: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
	}

	.progress-header {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 32rpx;
	}

	.progress-title {
		font-size: 36rpx;
		height: 56rpx;
		line-height: 56rpx;
		font-weight: bold;
		color: #2c2c2c;
	}

	.progress-stats {
		font-size: 28rpx;
		height: 56rpx;
		line-height: 56rpx;
		color: #6c757d;
	}

	.progress-bar {
		height: 16rpx;
		background: #e9ecef;
		border-radius: 8rpx;
		overflow: hidden;
		margin-bottom: 16rpx;
	}

	.progress-fill {
		height: 100%;
		width: 130rpx;
		background: linear-gradient(to right, #3a397a, #6a69b3);
		border-radius: 8rpx;
	}

	.progress-desc {
		font-size: 28rpx;
		color: #2c2c2c;
		height: 50rpx;
		line-height: 50rpx;
	}

	/* 核心功能按钮 */
	.actions-grid {
		margin-bottom: 48rpx;
		flex-direction: row;
		flex-wrap: wrap;
	}

	.grid-col {
		width: 50%;
	}

	.grid-col-1,
	.grid-col-2 {
		padding-bottom: 24rpx;
	}

	.grid-col-1,
	.grid-col-3 {
		padding-right: 12rpx;
	}

	.grid-col-2,
	.grid-col-4 {
		padding-left: 12rpx;
	}

	.action-card {
		flex: 1;
		background: white;
		border-radius: 32rpx;
		padding: 30rpx;
		text-align: center;
		background-image: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
	}

	.click-hover {
		transform: scale(0.97);
	}

	.action-icon {
		width: 100rpx;
		height: 100rpx;
		background: linear-gradient(to bottom left, #f0f3ff, #e6e9ff);
		border-radius: 50rpx;
		align-items: center;
		justify-content: center;
		margin: 0 auto 16rpx;
	}

	.action-icon-text {
		color: #333;
		font-size: 40rpx;
	}

	.action-icon-play {
		position: relative;
		left: 5rpx;
	}

	.action-title {
		font-size: 32rpx;
		margin-bottom: 8rpx;
		color: #2c2c2c;
		text-align: center;
		font-weight: bold;
	}

	.action-desc {
		font-size: 26rpx;
		color: #6c757d;
		text-align: center;
	}

	/* 区块标题 */
	.section {
		margin-bottom: 48rpx;
	}

	.section-title {
		margin-bottom: 32rpx;
		padding-left: 16rpx;
		border-left: 8rpx solid #3a397a;
	}

	.section-title-text {
		font-size: 40rpx;
		font-weight: bold;
		color: #2c2c2c;
	}

	/* 考试列表 */
	.exam-card {
		background: #fff;
		border-radius: 32rpx;
		padding: 32rpx;
		flex-direction: row;
		justify-content: space-between;
		margin-bottom: 20rpx;
		border: 2rpx solid #e6e9f0;
		background: linear-gradient(to bottom, #ffffff, #f8f9fc);
	}

	.exam-name {
		font-size: 32rpx;
		margin-bottom: 8rpx;
		height: 50rpx;
		line-height: 50rpx;
		color: #2c2c2c;
	}

	.exam-details {
		font-size: 26rpx;
		color: #6c757d;
		height: 40rpx;
		line-height: 40rpx;
	}

	.exam-date-info {
		align-items: flex-end;
	}

	.exam-date {
		font-weight: bold;
		color: #3a397a;
		height: 50rpx;
		line-height: 50rpx;
		margin-bottom: 8rpx;
	}

	.exam-days-left {
		font-size: 24rpx;
		color: #ff7e5f;
		font-weight: bold;
		height: 40rpx;
		line-height: 40rpx;
	}

	/* 学科导航 */
	.subject-view {
		flex-direction: row;
		flex-wrap: wrap;
		padding: 8rpx 0 32rpx;
	}

	.subject-item {
		width: 25%;
		padding: 0 0 20rpx 0;
	}

	.subject-icon {
		width: 120rpx;
		height: 120rpx;
		border-radius: 32rpx;
		background: white;
		align-items: center;
		justify-content: center;
		margin: 0 auto 8rpx;
		color: #3a397a;
		background: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
		font-size: 24rpx;
	}

	.subject-name {
		font-size: 26rpx;
		font-weight: bold;
		text-align: center;
		line-height: 50rpx;
		height: 50rpx;
	}

	/* 学习数据卡片 */
	.stats-card {
		background: linear-gradient(to bottom, #ffffff, #f8f9fc);
		border: 2rpx solid #e6e9f0;
		border-radius: 20rpx;
		padding: 40rpx 20rpx;
	}

	.stats-grid {
		flex-direction: row;
		flex-wrap: wrap;
	}

	.stat-item {
		width: 50%;
	}

	.stat-item-1,
	.stat-item-2 {
		padding-bottom: 18rpx;
	}

	.stat-item-3,
	.stat-item-4 {
		padding-top: 18rpx;
	}

	.stat-item-1,
	.stat-item-3 {
		padding-right: 12rpx;
	}

	.stat-item-2,
	.stat-item-4 {
		padding-left: 12rpx;
	}

	.stat-value {
		font-size: 48rpx;
		text-align: center;
		font-weight: bold;
		color: #3a397a;
		margin-bottom: 8rpx;
	}

	.stat-label {
		font-size: 28rpx;
		text-align: center;
		color: #6c757d;
	}
</style>