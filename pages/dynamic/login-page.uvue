<template>
	<scroll-view class="root">
		<view class="container">
			<!-- Logo åŒºåŸŸ -->
			<view class="logo-container">
				<text class="logo-text">è€ƒè¯•ç­”é¢˜æ¨¡ç‰ˆ</text>
			</view>

			<!-- ç™»å½•è¡¨å• -->
			<view class="login-form">
				<view class="form-group">
					<text class="form-label">å­¦å·/æ‰‹æœºå·</text>
					<view class="input-wrap">
						<input v-model="username" class="form-input" placeholder="è¯·è¾“å…¥å­¦å·æˆ–æ‰‹æœºå·" type="text" />
						<text class="input-icon">ğŸ‘¤</text>
					</view>
				</view>

				<view class="form-group">
					<text class="form-label">å¯†ç </text>
					<view class="input-wrap">
						<input v-model="password" class="form-input" placeholder="è¯·è¾“å…¥å¯†ç " :password="!showPwd" />
						<text class="input-icon" @tap="showPwd = !showPwd">
							{{ showPwd ? 'ğŸ™ˆ' : 'ğŸ”’' }}
						</text>
					</view>
				</view>

				<button class="login-button" @tap="handleLogin">
					<text>{{ loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•' }}</text>
				</button>

				<view class="register-link-forgot">
					<view class="register-link">
						<text>æ²¡æœ‰è´¦å·? </text>
						<text class="link" @tap="goRegister">ç«‹å³æ³¨å†Œ</text>
					</view>

					<view class="forgot">
						<text class="forgot-password" @tap="goForget">å¿˜è®°å¯†ç ?</text>
					</view>
				</view>
			</view>

			<!-- éšç§åè®® -->
			<view class="privacy">
				<text class="privacy-text">ç™»å½•å³ä»£è¡¨æ‚¨åŒæ„æˆ‘ä»¬çš„ </text>
				<text class="link privacy-text" @tap="goProtocol('user')">ç”¨æˆ·åè®®</text>
				<text class="privacy-text"> å’Œ </text>
				<text class="link privacy-text" @tap="goProtocol('privacy')">éšç§æ”¿ç­–</text>
			</view>
		</view>
	</scroll-view>
</template>

<script setup lang="uts">
	import { ref } from 'vue'

	const username = ref('')
	const password = ref('')
	const remember = ref(false)
	const showPwd = ref(false)
	const loading = ref(false)

	const handleLogin = () => {
		if (!username.value || !password.value) {
			uni.showToast({ title: 'è¯·è¾“å…¥è´¦å·å¯†ç ', icon: 'none' })
			return
		}
		loading.value = true
		setTimeout(() => {
			loading.value = false
			uni.showToast({ title: 'ç™»å½•æˆåŠŸ', icon: 'success' })
			// å®é™…ä¸šåŠ¡ï¼šè°ƒç”¨ç™»å½•æ¥å£å¹¶è·³è½¬é¦–é¡µ
		}, 1000)
	}

	const socialLogin = (type : string) => {
		uni.showToast({ title: `${type}ç™»å½•å¼€å‘ä¸­`, icon: 'none' })
	}
	const goForget = () => uni.showToast({ title: 'å¿˜è®°å¯†ç é¡µ', icon: 'none' })
	const goRegister = () => uni.showToast({ title: 'æ³¨å†Œé¡µ', icon: 'none' })
	const goProtocol = (type : string) => uni.showToast({ title: `${type}åè®®`, icon: 'none' })
</script>

<style>
	.root {
		flex: 1;
		background: linear-gradient(to bottom right, #f8f9fc, #eef0f8);
	}

	.container {
		justify-content: center;
		align-items: center;
		padding: 40rpx;
		flex: 1;
	}

	/* Logo */
	.logo-container {
		align-items: center;
		margin-bottom: 80rpx;
	}

	.logo-text {
		font-size: 56rpx;
		font-weight: bold;
		color: #3a397a;
		letter-spacing: 2rpx;
	}

	/* è¡¨å• */
	.login-form {
		width: 100%;
		max-width: 800rpx;
		background: linear-gradient(to bottom, #fff, #f8f9fc);
		border-radius: 40rpx;
		padding: 60rpx;
		border: 2rpx solid #e6e9f0;
	}

	.form-group {
		margin-bottom: 48rpx;
	}

	.form-label {
		font-size: 32rpx;
		color: #3a397a;
		margin-bottom: 16rpx;
		font-weight: bold;
	}

	.input-wrap {
		position: relative;
	}

	.form-input {
		width: 100%;
		padding: 20rpx 32rpx;
		border-radius: 24rpx;
		border: 2rpx solid #e6e9f0;
		background-color: #f8f9fc;
		font-size: 32rpx;
	}

	.input-icon {
		position: absolute;
		right: 32rpx;
		top: 50%;
		transform: translateY(-50%);
		font-size: 40rpx;
		color: #6c757d;
	}

	.forgot {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
	}

	.remember-me {
		flex-direction: row;
		align-items: center;
		font-size: 28rpx;
		color: #6c757d;
	}

	.forgot-password {
		font-size: 28rpx;
		color: #3a397a;
		font-weight: bold;
	}

	.login-button {
		width: 100%;
		background: linear-gradient(to bottom right, #3a397a, #4f4e8c);
		color: #fff;
		border-radius: 24rpx;
		font-size: 36rpx;
		font-weight: bold;
		border: 2rpx solid #2f2e62;
		margin-bottom: 48rpx;
	}

	.divider {
		flex-direction: row;
		align-items: center;
		margin-bottom: 48rpx;
	}

	.divider-line {
		flex: 1;
		height: 2rpx;
		background-color: #e6e9f0;
	}

	.divider-text {
		padding: 0 32rpx;
		font-size: 28rpx;
		color: #6c757d;
	}

	.social-login {
		flex-direction: row;
		justify-content: center;
		margin-bottom: 60rpx;
	}

	.social-icon {
		width: 100rpx;
		height: 100rpx;
		border-radius: 50rpx;
		background-color: #f8f9fc;
		border: 2rpx solid #e6e9f0;
		justify-content: center;
		align-items: center;
		margin: 0 20rpx;
	}

	.icon {
		font-size: 48rpx;
	}

	.register-link-forgot {
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
	}

	.register-link {
		flex-direction: row;
	}

	.register-link-text {
		text-align: center;
		font-size: 28rpx;
		color: #6c757d;
	}

	.privacy {
		margin-top: 40rpx;
		flex-direction: row;
		flex-wrap: wrap;
		width: 80%;
		justify-content: center;
	}

	.privacy-text {
		font-size: 24rpx;
		color: #6c757d;
	}

	.link {
		color: #3a397a;
		font-weight: bold;
	}
</style>